

===== 数据库设计


. 流程分 _流程模板/流程实例/节点任务_
. 流程实例和节点任务都设计两张表, 一个只记录活跃中的数据,
一个记录活跃和历史的数据
.. 流程流转的数据都从活跃表中查
.. 在流程实例结束或任务完成时, 将完成的从活跃表中删除, 已保证活跃表数据少速度快
. 为解决并发处理流程的问题, 在表中增加version字段
.. 通过cas无锁机制, 在更新活跃表数据时, 先查询这条数据.
更新时, 只更新等于查出来的version值的数据, 更新后将version加一