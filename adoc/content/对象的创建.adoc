

==== 对象的创建


. 检查类是否被加载 +
当虚拟机遇到 `new` 指令时, 首先去检查这个指令的参数能否能在常量池中定位到一个类的符号引用.
并检查这个符号引用代表的类是否已经被加载过
. 为对象分配内存
.. 内存连续情况
... 内存空间绝对规整, 使用指针碰撞方式. +
将指针放在已用内存和空闲内存之间, 然后向空闲内存移动指针,
划取需要的内存大小
.... 原文 +
所有用过的内 存都放在一边，空闲的内存放在另一边，中间放着一个指针作为分界点的指示器，那所分配 内存就仅仅是把那个指针向空闲空间那边挪动一段与对象大小相等的距离
... 内存不连续, 使用空闲列表方式
需要虚拟机维护一个可用内存列表, 
.. 多线程并发分配内存问题 +
如A对象正在分配内存, 还未修改指针时, B对象也要这个指针分配内存
... 采用同步的方法, 使用CAS来保证操作的原子性
... 每个线程都在堆中预先分配一小块内存, 成为本地线程分配缓冲(Thread Local Allocation Buffer).
每个线程在自己的空间内进行分配内存. +
可以在JVM配置中开启TLAB, 并发分配内存提高效率.
`-XX:+/-UseTLAB`
. 为分配内存初始化零值
. 在对象头中设置 _所属类/类的元数据/对象的hashcode/GC分代年龄_
. 执行init方法